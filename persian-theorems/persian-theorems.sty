\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{persian-theorems}


\RequirePackage[thmmarks,amsmath,amsthm]{ntheorem}
\RequirePackage[colorlinks]{hyperref}
\RequirePackage[nameinlink]{cleveref}
\RequirePackage{enumitem}


\newif\ifabjad\abjadfalse
\DeclareOption{abjad}{\abjadtrue}
\DeclareOption{fa}{\abjadfalse}
\ProcessOptions\relax


% \makeatletter
% \def\th@plain{%
% 	\thm@notefont{}% same as heading font
% 	\itshape % body font
% }
% \def\th@definition{%
% 	\thm@notefont{}% same as heading font
% 	\normalfont % body font
% }
% \makeatother
\newtheorem{otheorem}{oth}
\newtheorem{oexample}{oex}

\makeatletter
\@ifclassloaded{book}
{
	\renewcommand{\theotheorem}{\thechapter \@SepMark\arabic{otheorem}} 
	\renewcommand{\theoexample}{\thechapter \@SepMark\arabic{oexample}} 

}{
	\renewcommand{\theotheorem}{\@SepMark\arabic{otheorem}} 
	\renewcommand{\theoexample}{\@SepMark\arabic{oexample}} 

}
\makeatother


\theoremseparator{.}
\theoremsymbol{}
\theorembodyfont{\itshape}
\theoremheaderfont{\normalfont\bfseries}
\theoremstyle{plain}
\newtheorem{theorem}[otheorem]{قضیه}
\newtheorem{corollary}[otheorem]{پی‌آمد}
\newtheorem{lemma}[otheorem]{لم}
\newtheorem{proposition}[otheorem]{گزاره}
\newtheorem{claim}{داو}



\theoremseparator{.}
\theoremsymbol{}
\theorembodyfont{\upshape}
\theoremheaderfont{\normalfont\bfseries}
\theoremstyle{plain}
\newtheorem{remark}{ملاحظه}
\newtheorem{example}[oexample]{نمونه}

\theoremseparator{:}
\theoremsymbol{}
\theorembodyfont{\upshape}
\theoremheaderfont{\normalfont\bfseries}
\theoremstyle{nonumberplain}
\newtheorem{definition}{شناسانش}
\newtheorem{comment}{فرانمون}
\newtheorem{observation}{نگرش}
\newtheorem{intuition}{دریافت}
\newtheorem{note}{نکته}

\theoremseparator{.}
\theoremsymbol{{\ensuremath{\blacksquare}}}
\theorembodyfont{\upshape}
\theoremheaderfont{\itshape}
\theoremstyle{nonumberplain}
\renewtheorem{proof}{برهان}
\theoremsymbol{{\ensuremath{\square}}}
\newtheorem{prooflemma}{برهان}
\theoremsymbol{{\ensuremath{\triangleright}}}
\newtheorem{solution}{پاسخ}


\newcommand{\crefrangeconjunction}{\,تا\,}
\newcommand{\crefpairconjunction}{\,و\,}

\crefname{theorem}{قضیه}{قضیه‌ها}
\crefname{example}{نمونه}{نمونه‌ها}
\crefname{corollary}{پی‌آمد}{پی‌آمدها}
\crefname{lemma}{لم}{لم‌ها}
\crefname{proposition}{گزاره}{گزاره‌ها}
\crefname{remark}{ملاحظه}{ملاحظات}
\crefname{definition}{شناسانش}{شناسانش‌ها}
\crefname{note}{نکته}{نکته‌ها}
\crefname{equation}{برابری}{برابری‌ها}
\crefname{algorithm}{الگوریتم}{الگوریتم‌ها}
\crefname{section}{بخش}{بخش‌های}


\makeatletter

	\newcommand*{\soalEnums}[1]{
	\expandafter\@soalEnums\csname c@#1\endcsname%
}
	\newcommand*{\@soalEnums}[1]{%
	\ifcase#1\or الف) \or ب) \or پ) \or ت) \or ث) \or ج) \or چ) \or ح) \or خ)
	\or د) \or ذ) \or ر) \or ز) \or ژ) \or س) \or ش) \or ص) \or ض) \or ط) \or ظ) \or ع) \or غ) \or ف) \or ق)
	\or ک) \or گ) \or ل) \or م) \or ن) \or و) \or هـ) \or ی)
	\else\@ctrerr\fi%
}
	\ifabjad
	\renewcommand*{\@soalEnums}[1]{%
		\ifcase#1\or الف) \or ب) \or ج) \or د) \or هـ) \or و) \or ز) \or ح)
		\or ط) \or ی) \or ک) \or ل) \or م) \or ن) \or س) \or ع) \or ف) \or ص) \or ق) \or ر) \or ش) \or ت) \or ث) \or خ) \or ذ) \or ض) \or ظ) \or غ)
		\else\@ctrerr\fi%
	} \fi
	
\AddEnumerateCounter{\soalEnums}{\@soalEnums}{0}

\makeatother


\let\itemorig\item    % Create a copy of the original \item

\makeatletter
\def\myitem{%
	\@ifnextchar[ \@myitem{\@noitemargtrue\@myitem[\@itemlabel]}}
\def\@myitem[#1]{\itemorig[#1]\mbox{}\par}
\makeatother


\setlist[1]{labelindent=\parindent}
\newlist{soal}{enumerate}{2}
\setlist[soal,1]{wide, label={\Large پرسش \arabic*},
	%before=\renewcommand{\item}{\myitem},   
	%after=\renewcommand{\item}{\itemorig}
}
\setlist[soal,2]{wide,labelindent = \parindent + 10mm, label={\soalEnums*},
%before=\renewcommand{\item}{\itemorig}
}
