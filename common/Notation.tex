% it uses xparse


%intervals
\DeclarePairedDelimiterX{\clcl}[2]{[}{]}{#1 , #2}
\DeclarePairedDelimiterX{\clop}[2]{[}{[}{#1 , #2}
\DeclarePairedDelimiterX{\opcl}[2]{]}{]}{#1 , #2}
\DeclarePairedDelimiterX{\opop}[2]{]}{[}{#1 , #2}
\DeclarePairedDelimiterX{\curlyclcl}[2]{\{ }{ \}}{#1 , #2}

%pairs
\DeclarePairedDelimiter{\vertp}{\lvert}{\rvert}
\DeclarePairedDelimiter{\Vertp}{\lVert}{\rVert}
\DeclarePairedDelimiter{\floorp}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceilp}{\lceil}{\rceil}
\DeclarePairedDelimiter{\roundp}{\lfloor}{\rceil}
\DeclarePairedDelimiter{\anglep}{\langle}{\rangle}
\DeclarePairedDelimiter{\bracketp}{(}{)}
\DeclarePairedDelimiter{\curlyp}{\{}{\}}
\DeclarePairedDelimiter{\squarep}{[}{]}

\DeclarePairedDelimiter{\brap}{\langle}{\rvert}
\DeclarePairedDelimiter{\ketp}{\lvert}{\rangle}
\DeclarePairedDelimiterX{\braketp}[2]{\langle}{\rangle}{#1 \delimsize\vert #2}

%\ifblank{#1}{\:\cdot\:}{#1}
\NewDocumentCommand{\DeclareTripledDelimiter}{O{*}mmmmm}{%
	\makeatletter
	\ifcsname @tempDelim \endcsname%
	{}
  	\else%
	  \DeclarePairedDelimiterX{\@tempDelim}[2]{#2}{#4}{\ensuremath{##1 \, \delimsize#3 \, \mathopen{}##2}}
  	\fi%
	\expandafter \csname @tempDelim \endcsname #1{#5}{#6}
	\makeatother	
}
\NewDocumentCommand{\ket}{O{*}m}{%
	\expandafter \csname ketp \endcsname #1{#2}
}
\NewDocumentCommand{\bra}{O{*}m}{%
	\expandafter \csname brap \endcsname #1{#2}
}
\NewDocumentCommand{\braket}{O{*}mm}{%
	\expandafter \csname braketp \endcsname #1{#2}{#3}
}
\NewDocumentCommand{\abs}{O{*}m}{%
	\expandafter \csname vertp \endcsname #1{#2}
}
\NewDocumentCommand{\norm}{O{*}m}{%
	\expandafter \csname Vertp \endcsname #1{#2}
}
\NewDocumentCommand{\floor}{O{*}m}{%
	\expandafter \csname floorp \endcsname #1{#2}
}
\NewDocumentCommand{\ceil}{O{*}m}{%
	\expandafter \csname ceilp \endcsname #1{#2}
}
\NewDocumentCommand{\round}{O{*}m}{%
	\expandafter \csname roundp \endcsname #1{#2}
}
\NewDocumentCommand{\angleBracket}{O{*}m}{%
	\expandafter \csname anglep \endcsname #1{#2}
}
\NewDocumentCommand{\bracket}{O{*}m}{%
	\expandafter \csname bracketp \endcsname #1{#2}
}
\NewDocumentCommand{\squareBracket}{O{*}m}{%
	\expandafter \csname squarep \endcsname #1{#2}
}
\NewDocumentCommand{\curlyBracket}{O{*}m}{%
	\expandafter \csname curlyp \endcsname #1{#2}
}

\NewDocumentCommand{\pair}{O{*}mm}{%
	\expandafter \csname bracketp \endcsname #1{#2 , #3}
}


%set
\NewDocumentCommand{\set}{O{*}d<>m}{%
	\IfNoValueTF{#2}
	{\expandafter \csname curlyp \endcsname #1{#3}}
	{\DeclareTripledDelimiter[#1]{\{}{\vert}{\}}{#2}{#3}}
}



%functions
\NewDocumentCommand{\func}{O{*}mm}
{
	\ensuremath{#2 \expandafter \csname bracketp \endcsname #1{#3}}
}
\NewDocumentCommand{\squareFunc}{O{*}mm}
{
	\ensuremath{#2 \expandafter \csname squarep \endcsname #1{#3}}
}
\NewDocumentCommand{\curlyFunc}{O{*}mm}
{
	\ensuremath{#2 \expandafter \csname curlyp \endcsname #1{#3}}
}
\NewDocumentCommand{\operatorFunc}{O{*}mm}
{
	\ensuremath{ \expandafter \csname bracketp \endcsname #1{#2} \expandafter \csname bracketp \endcsname #1{#3}}
}

\newcommand{\evaluate}[1]{\ensuremath{\squareBracket[[\Bigg]]{#1}}}

\DeclareMathOperator*{\residue}{Res}
